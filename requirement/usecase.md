# Usecase


```plantuml
@startuml システム管理者

left to right direction
skinparam actorStyle awesome
skinparam actor {
    BackgroundColor #333333
    BorderColor #999999
}
actor システム管理者 as admin
actor 販売代理店 as sales_agent
actor 運送サービスプロバイダー as trans_service_provider
actor 運送サービスマネージャー as trans_service_manager
actor クルー as crew
actor 元請け企業 as prime_contractor

rectangle ChipsNeoSystem {
    usecase "管理ページへのログイン"
    usecase "販売代理店ページへのログイン" 
    usecase "運送サービスプロバイダーページへのログイン"
    usecase "代理店のアカウントを作成"
    usecase "代理店のアカウントのパスワードリセット"
    usecase "代理店のアカウント情報の変更"
    usecase "TSPアカウント作成・編集・削除"
    usecase "TSMアカウントを作成・編集・削除"
    usecase "TSPの銀行情報を入力"
    usecase "運送サービスマナージャーページへのログイン"
    usecase "クルーのアカウントを作成・編集・削除"
    usecase "クルーページへのログイン"
    usecase "元請け企業の追加・編集"
    usecase "元請け宛への請求書の作成"
    usecase "元請け宛への請求書の共有リンクの作成"
    usecase "元請け宛への請求書の送付"
    usecase "シフトの入力"
    usecase "シフトの変更依頼"
    usecase "シフトの変更承認"
    usecase "TSM宛の請求書を作成"
    usecase "配達実績の入力"
    usecase "出退勤を入力"
    usecase "TSP宛への請求書の作成"

}

admin --> "管理ページへのログイン"
admin --> "代理店のアカウントを作成"
admin --> "代理店のアカウントのパスワードリセット"
admin --> "代理店のアカウント情報の変更"

sales_agent --> "販売代理店ページへのログイン" 
sales_agent --> "TSPアカウント作成・編集・削除"
trans_service_provider --> "運送サービスプロバイダーページへのログイン"
trans_service_provider --> "クルーのアカウントを作成・編集・削除"
trans_service_provider --> "TSMアカウントを作成・編集・削除"
trans_service_provider --> "TSPの銀行情報を入力"
trans_service_provider --> "元請け企業の追加・編集"

trans_service_manager --> "運送サービスマナージャーページへのログイン"
trans_service_manager --> "元請け宛への請求書の作成"
trans_service_manager --> "シフトの変更承認"
trans_service_manager --> "元請け宛への請求書の共有リンクの作成"


crew --> "クルーページへのログイン"
crew --> "シフトの入力"
crew --> "シフトの変更依頼"
crew -> "TSM宛の請求書を作成"
crew --> "出退勤を入力"
crew --> "配達実績の入力"
crew --> "TSP宛への請求書の作成"

prime_contractor --> "元請け宛への請求書の表示（共有リンク）"


@enduml

```

## 管理ページへのログイン

ClockWiseさんの担当者がログインページにアクセスし、ログインIDとパスワードを入力して、ログインボタンをクリックする。
ログインIDとパスワードは事前に用意されたものを利用する。（ログインIDとパスワードはDBに直接SQLでレコード追加することを想定）

## 代理店のアカウントを作成

ClockWiseさんの管理者にシステムにログインし、代理店アカウント作成のボタンをクリックする。すると以下のような入力フォームが表示されるので、必要事項を入力後、追加をクリック。

- 会社名
- 電話番号
- メールアドレス（ログインIDにするか？要確認）

追加完了画面に自動生成されたパスワードが表示される。このパスワードをメール等で代理店に送付する。（パスワードはDBにハッシュ化された形で保存されるので、システムを経由して再取得することはできない）

## 代理店のアカウントのパスワードリセット

ClockWiseさんの管理者にシステムにログインし、代理店一覧よりリセット対象の代理店をクリック。
パスワードリセットボタンをクリックすると、新しいパスワードが表示される。そのパスワードをClockWiseさんの担当者メール等で代理店の担当者に伝える。

## 販売代理店ページへのログイン

販売代理店ページへアクセスし、ClockWiseから送付されたログインID（メールアドレス？）とパスワードを入力して、ログインボタンをクリックする。

## TSPアカウント作成・編集・削除

販売代理店ページへログイン後、TSPアカウントの作成ボタンをクリックする。
すると以下のような入力フォームが表示されるので、必要事項を入力後、追加をクリック。

- 企業名
- 代表者名
- 所在地
- 登録番号（要確認）
- 電話番号
- メールアドレス（ログインIDにするか？要確認）

追加完了画面に自動生成されたパスワードが表示される。このパスワードをメール等で運送サービス・プロバイダーの担当者宛に送付する。（パスワードはDBにハッシュ化された形で保存されるので、システムを経由して再取得することはできない）

## TSMアカウントを作成・編集・削除

TODO: 運送サービスマナージャーの機能の範囲を検討する。
Chipsではマネージャーとクルーを兼任できるような設計になっており、TSMとCrewが完全に
分離しないが、一緒にしたほうがよいのか、分離したほうがよいのかはのちほど検討する。


## 元請け企業の追加・編集

TSPアカウントでログイン後、元請け企業の追加ボタンをクリックする。
以下の必要事項を入力し、追加をクリック。

- 請求書の利用する情報
  - 企業名
  - 請求書の宛名
  - 住所
  - 担当者
- シフトの集計に利用する情報
  - 倉庫の所在エリア
  - 日当（請求用）
  - 日当（クルー支払い用）
  - 
